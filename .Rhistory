data("mtcars")
mtcars
levels(mtcars$gear)
levels(mtcars$carb)
lapply(class, mtcars)
sapply(class, mtcars)
apply(class, mtcars)
apply(class, function(x) { mtcars[,x]})
apply(class, FUN = function(x) { mtcars[,x]})
apply(FUN = function(x) { class(mtcars[,x]) })
lapply(mtcars, class)
mtcars
lm('y ~ vs * am + cyl', mtcars)
lm('mpg ~ vs * am + cyl', mtcars)
fit <- lm('mpg ~ vs * am + cyl', mtcars)
summary(fit)
fit <- lm('mpg ~ vs * am * gear + cyl', mtcars)
summary(fit)
fit <- lm('mpg ~ vs:am:gear + cyl', mtcars)
summary(fit)
mtcars$vs <- as.factor(mtcars$vs)
mtcars$am <- as.factor(mtcars$am)
mtcars$gear <- as.factor(mtcars$am)
data("mtcars")
mtcars
mtcars$vs <- as.factor(mtcars$vs)
mtcars$am <- as.factor(mtcars$am)
mtcars$gear <- as.factor(mtcars$gear)
lapply(mtcars, class)
fit <- lm("mpg ~ vs : am : gear + cyl", mtcars)
summary(fit)
setwd('~/Desktop/projects/matching_estimator_flooding_south_dunedin_2000_2018/')
source('scripts/flooding_analysis_prep.R')
F_NFP
class(F_NFP$after_flood)
class(F_NFP$flood_prone)
class(F_NFP$flood)
source('scripts/flooding_analysis_prep.R')
source('scripts/flooding_analysis_prep.R')
class(flood_sub$after_flood)
class(flood_sub$flood)
class(flood_sub$non_flood)
class(flood_sub$non_flood_prone)
class(flood_sub$flood_prone)
source('scripts/DiD.R')
results[["F_NFP"]][["model_summary"]]
source('scripts/DiD.R')
results[["F_NFP"]][["model_summary"]][["unmatched_data"]]
png(filename = "interaction_partial_plot.png",
width = 1500,
height = 1500,
units = "px",
pointsize = 10,
bg = "white",
res = 200
)
partial_comparison_plot_interaction(results[["F_NFP"]], "after_flood","treatment","after_flood:treatment")
dev.off()
results[["F_NFP"]][["model_partials"]][["unmatched_data"]]
results[["F_NFP"]][["model_partials"]][["unmatched_data"]][["after_flood:treatment"]]
source('scripts/DiD.R')
source('scripts/DiD.R')
source('scripts/DiD.R')
source('scripts/DiD.R')
source('scripts/DiD.R')
source('scripts/DiD.R')
source('scripts/DiD.R')
png(filename = "interaction_partial_plot.png",
width = 1500,
height = 1500,
units = "px",
pointsize = 10,
bg = "white",
res = 200
)
partial_comparison_plot_interaction(results[["F_NFP"]], "after_flood","treatment","after_flood:treatment")
dev.off()
gl(n = 2,k = 50)
factor(rep(rep(1:4,times=c(12,12,13,13)),2))
factor(rep(c(1,2),times=50))
source('scripts/DiDiD.R')
results[["model_partials"]][["unmatched_data"]][["after_flood:flood_prone:flood"]]
source('scripts/DiDiD.R')
results[["model_summary"]]
source('scripts/DiDiD.R')
results[["model_partials"]]
results[["model_summary"]]
results[["model_partials"]]
source('scripts/DiDiD.R')
results[["model_partials"]]
results[["model_fit"]][["unmatched_data"]][["model"]]
dat <- data.frame(F1=gl(n = 2,k = 50),
F2=factor(rep(rep(1:4,times=c(12,12,13,13)),2)),
F3=factor(rep(c(1,2),times=50)))
modmat <- model.matrix(~F1*F2*F3,dat)
modmat
runif(16,-2,2)
betas <- runif(16,-2,2)
dat$y <- rnorm(100,modmat%*%betas,1)
xtabs(~F1+F2+F3,dat)
m <- lm(y~F1*F2*F3,dat)
summary(m)
effect('F12:F24:F32', m, patial.residuals = TRUE)
effect(F12, m, patial.residuals = TRUE)
effect("F12", m, patial.residuals = TRUE)
effect("F1", m, patial.residuals = TRUE)
effect("F1:F2:F3", m, patial.residuals = TRUE)
runidat
dat
x$dat <- runif(100, 0, 2)
dat$x <- runif(100, 0, 2)
dat
m <- lm(y~F1*F2*F3+x,dat)
summary(m)
effect("F1:F2:F3", m, patial.residuals = TRUE)
effect('x', m, partial.residuals = TRUE)
factor(rep(rep(1:4,times=c(12,12,13,13)),2)
)
factor(rep(rep(1:2,times=c(12,12,13,13)),2))
factor(rep(rep(1:2,times=c(12,12)),2))
factor(rep(rep(1:2,times=c(12,13)),4))
dat$F2 <- factor(rep(rep(1:2,times=c(12,13)),4))
modmat <- model.matrix(~F1*F2*F3,dat)
xtabs(~F1+F2+F3,dat)
m <- lm(y~F1*F2*F3,dat)
summary(m)
m <- lm(y~F1*F2*F3+x,dat)
summary(m)
effect('F1:F2:F3', m, partial.residuals = TRUE)
plot(effect('F1:F2:F3', m, partial.residuals = TRUE))
source('scripts/DiDiD.R')
model_formula
xtabs(~after_flood*flood_prone*flood, matched_sub)
xtabs(~after_flood+flood_prone+flood, matched_sub)
m <- lm(ln_sale_price ~ after_flood * flood_prone * flood + sale_year, matched_sub)
summary(m)
effect('after_flood:flood_prone:flood', m, partial.residuals = TRUE)
effect('sale_year', m, partial.residuals = TRUE)
m <- lm(ln_sale_price ~ after_flood * flood * flood_prone + sale_year, matched_sub)
xtabs(~after_flood+flood+flood_prone, matched_sub)
summary(m)
effect('sale_year', m, partial.residuals = TRUE)
effect('after_flood:flood:flood_prone', m, partial.residuals = TRUE)
source('scripts/DiDiD.R')
source('scripts/DiDiD.R')
results[["model_partials"]][["unmatched_data"]][["after_flood:flood_prone:flood"]]
plot(results[["model_partials"]][["unmatched_data"]][["after_flood:flood_prone:flood"]])
plot_data(results, 'after_flood:flood_prone:flood')
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood:flood_prone:flood")
partial_comparison_plot_triple_interaction(results, "flood", after_flood:flood_prone:flood")
""
partial_comparison_plot_triple_interaction(results, "flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "flood", "after_flood:flood_prone:flood")
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
df_fit
df_fit
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
df_fit
subset(df_fit, flood_prone != 'not_flooded' & flood != 'flooded')
subset(df_points, flood_prone != 'not_flooded' & flood != 'flooded')
subset(df_points, flood_prone != 'not_flooded' & flood != 'flooded')
subset(df_fit, flood_prone != 'not_flooded' & flood != 'flooded')
subset(df_fit, flood_prone != 'not_flood_prone' & flood != 'flooded')
df_fit[which(flood_prone != 'not_flood_prone' & flood != 'flooded'),]
with(df_fit, df_fit[which(flood_prone != 'not_flood_prone' & flood != 'flooded'),])
with(df_fit, df_fit[which(flood_prone == 'not_flood_prone' | flood == 'flooded'),])
with(df_fit, df_fit[which(flood_prone == 'flood_prone' | flood == 'not_flooded'),])
df_fit
subset(df_fit, flood_prone == 'flood_prone' | flood == 'flooded'
)
subset(df_fit, flood_prone == 'flood_prone' | flood == 'not_flooded')
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('scripts/DiDiD.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
results[["model_summary"]]
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "flood", "after_flood:flood_prone:flood")
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
source('functions/partial_plots.R')
partial_comparison_plot_triple_interaction(results, "after_flood", "after_flood:flood_prone:flood")
df_fit
source('scripts/D.R')
source('scripts/D.R')
source('scripts/D.R')
source('scripts/D.R')
results
partial_comparison_plot_factor(results[["F1"]], 'treatment')
partial_comparison_plot_factor(results[["F1"]], 'flood_prone')
results[["F1"]][["model_summary"]]
results[["F2"]][["model_summary"]]
results[["F3"]][["model_summary"]]
partial_comparison_plot_factor(results[["F3"]], 'flood_prone')
source('functions/partial_plots.R')
partial_comparison_plot_factor(results[["F3"]], 'flood_prone')
partial_comparison_plot_factor(results[["F1"]], 'flood_prone')
partial_comparison_plot_factor(results[["F2"]], 'flood_prone')
partial_comparison_plot_factor(results[["F3"]], 'flood_prone')
partial_comparison_plot_factor(results[["F1"]], 'flood_prone')
multiplot(
partial_comparison_plot_factor(results[["F2"]], 'flood_prone'),
partial_comparison_plot_factor(results[["F1"]], 'flood_prone'),
partial_comparison_plot_factor(results[["F3"]], 'flood_prone'),
cols = 3
)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '~/Desktop/projects/matching_estimator_flooding_south_dunedin_2000_2018')
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '~/Desktop/projects/matching_estimator_flooding_south_dunedin_2000_2018')
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '~/Desktop/projects/matching_estimator_flooding_south_dunedin_2000_2018')
knitr::include_graphics('/images/flooding_4June2015.png')
knitr::include_graphics('/images/flooding_4June2015.png')
View(results)
source('scr')
source('scripts/D.R')
results[["F1"]]
results[["F1"]][["model_summary"]]
print(xtable(results[["F1"]][["model_summary"]][[1]]),type='html')
mtable
require(memisc)
install.packages("memisc")
mtable
require(memisc)
library(memisc)
